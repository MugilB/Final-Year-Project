<div class="split-layout">
  <!-- Left Side: Animation & Content -->
  <div class="left-panel">
    <div class="panel-content">
      <div class="brand-badge">
        <i class="fas fa-shield-alt"></i> SecureVote
      </div>

      <div class="hero-content">
        <h1>Empower Your <br><span>Voice</span></h1>
        <p>Register today to participate in the upcoming secure elections. Your vote helps shape the future.</p>
      </div>
      <br>
      <br>
      <div class="animation-stage">
        <div class="voting-card">
          <div class="check-mark"><i class="fas fa-check"></i></div>
          <div class="line line-1"></div>
          <div class="line line-2"></div>
        </div>
        <div class="box-lid"></div>
        <div class="voting-box">
          <div class="slot"></div>
        </div>
      </div>
    </div>

    <!-- Background Abstract Elements -->
    <div class="circle circle-1"></div>
    <div class="circle circle-2"></div>
    <div class="glass-overlay"></div>
  </div>

  <!-- Right Side: Form -->
  <div class="right-panel">
    <div class="form-container">
      <div class="form-header">
        <button class="btn-back" (click)="goBack()">
          <i class="fas fa-arrow-left"></i> Back
        </button>
        <h2>New Voter Registration</h2>
        <p>Complete your profile to get verified.</p>
      </div>

      <form [formGroup]="voterForm" (ngSubmit)="onSubmit()" class="registration-form">
        <div class="form-row">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>First Name</mat-label>
            <input matInput formControlName="firstName">
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Last Name</mat-label>
            <input matInput formControlName="lastName">
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Email Address</mat-label>
            <input matInput formControlName="email" placeholder="name@example.com">
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Phone Number</mat-label>
            <input matInput formControlName="phoneNumber" placeholder="+91 ...">
          </mat-form-field>
        </div>

        <div class="form-row">
          <div class="flex-col w-full">
            <mat-form-field appearance="outline" class="w-full">
              <mat-label>Date of Birth</mat-label>
              <mat-datepicker-toggle matPrefix [for]="dobPicker"></mat-datepicker-toggle>
              <input matInput [matDatepicker]="dobPicker" formControlName="dateOfBirth">
              <mat-datepicker #dobPicker></mat-datepicker>
            </mat-form-field>

            <div class="eligibility-message" *ngIf="ageMessage && !getFieldError('dateOfBirth')"
              [class.eligible]="isEligible" [class.ineligible]="!isEligible">
              <i class="fas" [class.fa-check-circle]="isEligible" [class.fa-exclamation-circle]="!isEligible"></i>
              {{ ageMessage }}
            </div>
          </div>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Gender</mat-label>
            <mat-select formControlName="gender">
              <mat-option value="Male">Male</mat-option>
              <mat-option value="Female">Female</mat-option>
              <mat-option value="Other">Other</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Address</mat-label>
          <textarea matInput formControlName="address" placeholder="Enter your full residential address"
            rows="3"></textarea>
        </mat-form-field>

        <div class="form-row">
          <div class="flex-col w-full">
            <mat-form-field appearance="outline" class="w-full">
              <mat-label>Ward</mat-label>
              <mat-select formControlName="wardId">
                <mat-option *ngFor="let ward of wards" [value]="ward.wardId">{{ ward.wardName }}</mat-option>
              </mat-select>
            </mat-form-field>
            <div *ngIf="loadingWards" class="loading-text">Loading wards...</div>
          </div>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Blood Group</mat-label>
            <mat-select formControlName="bloodGroup">
              <mat-option value="A+">A+</mat-option>
              <mat-option value="A-">A-</mat-option>
              <mat-option value="B+">B+</mat-option>
              <mat-option value="B-">B-</mat-option>
              <mat-option value="AB+">AB+</mat-option>
              <mat-option value="AB-">AB-</mat-option>
              <mat-option value="O+">O+</mat-option>
              <mat-option value="O-">O-</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Aadhar Card Proof (Drive Link)</mat-label>
          <input matInput formControlName="aadharCardLink" placeholder="https://drive.google.com/...">
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Profile Picture (Drive Link)</mat-label>
          <input matInput formControlName="profilePictureLink" placeholder="https://drive.google.com/...">
        </mat-form-field>

        <div class="error-message general-error" *ngIf="errorMessage">
          <i class="fas fa-exclamation-triangle"></i> {{ errorMessage }}
        </div>

        <div class="success-message" *ngIf="successMessage">
          <i class="fas fa-check-circle"></i> {{ successMessage }}
        </div>

        <div class="form-actions">
          <button mat-flat-button color="primary" type="submit" [disabled]="isLoading || !isFormValid"
            class="btn-submit-mat">
            <span *ngIf="isLoading" class="spinner"></span>
            {{ isLoading ? 'Processing...' : 'Register Now' }}
            <mat-icon *ngIf="!isLoading">arrow_forward</mat-icon>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>