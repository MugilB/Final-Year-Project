<div class="split-layout">
  <!-- Left Side: Animation & Content -->
  <div class="left-panel">
    <div class="panel-content">
      <div class="brand-badge">
        <i class="fas fa-vote-yea"></i> SecureVote
      </div>

      <div class="hero-content">
        <h1>Lead The <br><span>Future</span></h1>
        <p>Nominate yourself as a candidate and be the change you wish to see. Your leadership matters.</p>
      </div>

      <div class="animation-stage">
        <div class="podium">
          <div class="podium-base"></div>
          <div class="podium-top">
            <div class="star-icon"><i class="fas fa-star"></i></div>
          </div>
        </div>
        <div class="confetti c1"></div>
        <div class="confetti c2"></div>
        <div class="confetti c3"></div>
      </div>
    </div>

    <!-- Background Abstract Elements -->
    <div class="circle circle-1"></div>
    <div class="circle circle-2"></div>
    <div class="glass-overlay"></div>
  </div>

  <!-- Right Side: Form -->
  <div class="right-panel">
    <div class="form-container">
      <div class="form-header">
        <button class="btn-back" (click)="goBack()">
          <i class="fas fa-arrow-left"></i> Back
        </button>
        <h2>Candidate Nomination</h2>
        <p>Submit your application to stand for election.</p>
      </div>

      <form [formGroup]="candidateForm" (ngSubmit)="onSubmit()" class="nomination-form">

        <div class="form-row">
          <div class="flex-col w-full full-width">
            <mat-form-field appearance="outline" class="w-full">
              <mat-label>Select Election</mat-label>
              <mat-select formControlName="electionId" [disabled]="loadingElections">
                <mat-option value="">Choose an election...</mat-option>
                <mat-option *ngFor="let election of elections" [value]="election.electionId">
                  {{ election.name }} - {{ formatDate(election.startDate) }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Full Name</mat-label>
            <input matInput formControlName="candidateName" placeholder="Candidate Name">
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Gender</mat-label>
            <mat-select formControlName="gender">
              <mat-option value="Male">Male</mat-option>
              <mat-option value="Female">Female</mat-option>
              <mat-option value="Other">Other</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Age</mat-label>
            <input matInput type="number" formControlName="age" placeholder="Age" min="18" max="100">
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Phone Number</mat-label>
            <input matInput type="tel" formControlName="phoneNumber" placeholder="+91 ...">
          </mat-form-field>
        </div>

        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Email Address</mat-label>
          <input matInput type="email" formControlName="email" placeholder="name@example.com">
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Address</mat-label>
          <textarea matInput formControlName="address" placeholder="Enter your full residential address"
            rows="3"></textarea>
        </mat-form-field>

        <div class="form-row">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Political Party</mat-label>
            <mat-select formControlName="party">
              <mat-option value="Independent Candidate">Independent Candidate</mat-option>
              <mat-option value="Other">Other (Specify)</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full" *ngIf="candidateForm.get('party')?.value === 'Other'">
            <mat-label>Specify Party</mat-label>
            <input matInput formControlName="customParty" placeholder="Party Name">
          </mat-form-field>

          <div class="flex-col w-full">
            <mat-form-field appearance="outline" class="w-full">
              <mat-label>Party Secret Code</mat-label>
              <input matInput type="password" formControlName="partySecretCode"
                [placeholder]="getSecretCodePlaceholder()">
            </mat-form-field>
            <div class="field-help" *ngIf="candidateForm.get('party')?.value === 'Independent Candidate'">
              Use: <strong>INDEPENDENT_SECRET_2024</strong>
            </div>
          </div>
        </div>

        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Aadhar Card Proof (Drive Link)</mat-label>
          <input matInput type="url" formControlName="aadharCardLink" placeholder="https://drive.google.com/...">
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Candidate Image (Drive Link)</mat-label>
          <input matInput type="url" formControlName="candidateImageLink" placeholder="https://drive.google.com/...">
        </mat-form-field>

        <div class="error-message general-error" *ngIf="errorMessage">
          <i class="fas fa-exclamation-triangle"></i> {{ errorMessage }}
        </div>

        <div class="success-message" *ngIf="successMessage">
          <i class="fas fa-check-circle"></i> {{ successMessage }}
        </div>

        <div class="form-actions">
          <button mat-flat-button color="primary" type="submit" [disabled]="isLoading || candidateForm.invalid"
            class="btn-submit-mat">
            <span *ngIf="isLoading" class="spinner"></span>
            {{ isLoading ? 'Submitting...' : 'Submit Nomination' }}
            <mat-icon *ngIf="!isLoading">send</mat-icon>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>